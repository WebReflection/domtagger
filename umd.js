(function(A,G){if(typeof define=='function'&&define.amd)define([],G);else if(typeof module=='object'&&module.exports)module.exports=G();else A.domtagger=G()}(typeof self!='undefined'?self:this,function(){
/*! (c) Andrea Giammarchi - ISC */var domtagger=function(m){"use strict";var o={};try{o.Symbol=Symbol}catch(e){!function(t,n,r){function a(e){return new t("Symbol(_@ungap/"+e+")")}a.for=function(e){return n[e]||(n[e]=a(r++))},o.Symbol=a}(String,Object.create(null),Math.random())}var e=o.Symbol,t={};try{t.WeakMap=WeakMap}catch(e){t.WeakMap=function(t,e){var n=e.defineProperty,r=e.hasOwnProperty,a=o.prototype;return a.delete=function(e){return this.has(e)&&delete e[this._]},a.get=function(e){return this.has(e)?e[this._]:void 0},a.has=function(e){return r.call(e,this._)},a.set=function(e,t){return n(e,this._,{configurable:!0,value:t}),this},o;function o(e){n(this,"_",{value:"_@ungap/weakmap"+t++}),e&&e.forEach(i,this)}function i(e){this.set(e[0],e[1])}}(Math.random(),Object)}var n,c,u,r,a,i,s,l=t.WeakMap,f=function(t,o){var i="fragment",c="template",n="content"in s(c)?function(e){var t=s(c);return t.innerHTML=e,t.content}:function(e){var t=s(i),n=s(c),r=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(e)){var a=RegExp.$1;n.innerHTML="<table>"+e+"</table>",r=n.querySelectorAll(a)}else n.innerHTML=e,r=n.childNodes;return o.call(r,u,t),t};return function(e,t){return("svg"===t?function(e){var t=s(i),n=s("div");return n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e+"</svg>",o.call(n.firstChild.childNodes,u,t),t}:n)(e)};function u(e){this.appendChild(e)}function s(e){return e===i?t.createDocumentFragment():t.createElement(e)}}(m,[].forEach),h=(c="appendChild",u="cloneNode",r="createTextNode",i=(a="importNode")in(n=m),(s=n.createDocumentFragment())[c](n[r]("g")),s[c](n[r]("")),(i?n[a](s,!0):s[u](!0)).childNodes.length<2?function e(t,n){for(var r=t[u](),a=t.childNodes||[],o=a.length,i=0;n&&i<o;i++)r[c](e(a[i],n));return r}:i?n[a]:function(e,t){return e[u](!!t)}),p="content"in m.createElement("template"),g=(p?"-0":"_dt: ")+Math.random()+(p?"0%":";"),d="\x3c!--"+g+"--\x3e",v=8,y=11,b=1,w=3,x=/^(?:style|textarea)$/i,N=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;var M=" \\f\\n\\r\\t",k="[^ "+M+"\\/>\"'=]+",E="[ "+M+"]+"+k,S="<([A-Za-z]+[A-Za-z0-9:_-]*)((?:",C="(?:\\s*=\\s*(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|"+k+"))?)",_=new RegExp(S+E+C+"+)([ "+M+"]*/?>)","g"),T=new RegExp(S+E+C+"*)([ "+M+"]*/>)","g"),$=new RegExp("("+E+"\\s*=\\s*)(['\"]?)"+d+"\\2","gi");function A(e,t,n,r){return"<"+t+n.replace($,O)+r}function O(e,t,n){return t+(n||'"')+g+(n||'"')}function j(e,t,n){return N.test(t)?e:"<"+t+n+"></"+t+">"}var L="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};function H(){for(var e=[],t=0,n=+this,r=arguments.length;n<r;)e[t++]=arguments[n++];return e}var R={};try{R.Map=Map}catch(e){R.Map=function(){var n=0,r=[],a=[];return{delete:function(e){var t=o(e);return t&&(r.splice(n,1),a.splice(n,1)),t},get:function(e){return o(e)?a[n]:void 0},has:function(e){return o(e)},set:function(e,t){return a[o(e)?n:r.push(e)-1]=t,this}};function o(e){return-1<(n=r.indexOf(e))}}}var W=R.Map;function D(e,t,n){return{type:e,name:n,node:t,path:function(e){var t,n=[];switch(e.nodeType){case b:case y:t=e;break;case v:t=e.parentNode,z(n,t,e);break;default:t=e.ownerElement}for(;t=(e=t).parentNode;)z(n,t,e);return n}(t)}}function F(e,t){for(var n=0,r=t.length;n<r;)e=e.childNodes[t[n++]];return e}function P(e,t,n){for(var r=new W,a=e.attributes,o=H.apply(0,a),i=[],c=0,u=o.length;c<u;){var s=o[c++];if(s.value===g){var l=s.name;if(!r.has(l)){var f=n.shift().replace(/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*['"]?$/,"$1"),h=a[f]||a[f.toLowerCase()];r.set(l,h),t.push(D("attr",h,f))}i.push(s)}}for(c=0,u=i.length;c<u;){var p=i[c++];/^id$/i.test(p.name)?e.removeAttribute(p.name):e.removeAttributeNode(p)}var d=e.nodeName;if(/^script$/i.test(d)){var v=m.createElement(d);for(c=0,u=a.length;c<u;)v.setAttributeNode(a[c++].cloneNode(!0));v.textContent=e.textContent,e.parentNode.replaceChild(v,e)}}function z(e,t,n){e.unshift(e.indexOf.call(t.childNodes,n))}var Z=e(),q=new l,B=new l;function G(i,c){var e=c.join(d).replace(T,j).replace(_,A),t=i.transform;t&&(e=t(e));var n=f(e,i.type),u=[];!function e(t,n,r){for(var a=0,o=t.childNodes,i=o.length;a<i;){var c=o[a++];switch(c.nodeType){case b:P(c,n,r),e(c,n,r);break;case v:c.textContent===g&&(r.shift(),n.push(x.test(t.nodeName)?D("text",t):D("any",c)));break;case w:x.test(t.nodeName)&&L.call(c.textContent)===d&&(r.shift(),n.push(D("text",t)))}}}(n,u,c.slice(0));var r={content:n,updates:function(n){for(var r=[],e=0,a=u.length;e<a;){var t=u[e++],o=F(n,t.path);switch(t.type){case"any":r.push(i.any(o,[]));break;case"attr":r.push(i.attribute(o,t.name,t.node));break;case"text":r.push(i.text(o)),o.textContent=""}}return function(){var e=0,t=arguments.length;if(a!==t)throw new Error(t+" values instead of "+a+"\n"+c.join(", "));for(;e<t;)r[e](arguments[e++]);return n}}};return B.set(c,r),r}return Object.defineProperty(m.createDocumentFragment().constructor.prototype,Z,{value:function(){return q.get(this).apply(this,arguments)}}),function(r){return function(e){var t=B.get(e)||G(r,e),n=h.call(m,t.content,!0);return q.set(n,t.updates(n)),n[Z].apply(n,H.apply(1,arguments))}}}(document);
return domtagger}));
